<h1> DO NOT REFRESH!</h1>
<h3> Stay still</h3>

<div class="container">
    <br>
    <div class="row">
        <table class="table table-striped table-bordered col-lg-10">
            <thead>
                <tr>
                    <th>Add Section
                        <a (click)="onEditCloseItems()" class="text-info float-right">
                            <i class="mdi mdi-{{isEditItems ? 'close' : 'pencil'}} mdi-18px"></i>
                        </a>
                    </th>
                </tr>
            </thead>

            <tbody *ngIf="!isEditItems">
                <tr *ngFor="let field of fieldArray; let i = index">
                    <td *ngIf="field?.name">
                        <i (click)="deleteFieldValue(field,i)" class="mdi mdi-close mdi-18px"></i> {{field.name}}
                    </td>
                </tr>
            </tbody>

            <tbody *ngIf="isEditItems">
                <tr *ngFor="let field of fieldArray; let i = index">
                    <td>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <div (click)="deleteFieldValue(field,i)" class="input-group-text">
                                    <i class="mdi mdi-close mdi-18px"></i>
                                </div>
                            </div>
                            <div class="sections">
                                <input [(ngModel)]="field.name" class="form-control" type="text" name="{{field.name}}"
                                    placeholder="Add Section {{i + 1}}.....">

                                <!-- <div class="row"> -->
                                <table class="table table-striped table-bordered col-lg-11 custom">
                                    <caption>
                                        <!-- <i>Add/remove textbox and chip dynamically in Angular 6</i> -->
                                    </caption>

                                    <thead>
                                        <tr>
                                            <th>Add Sub Section
                                                <a (click)="onEditCloseSubItems(i)" class="text-info float-right">
                                                    <i
                                                        class="mdi mdi-{{isEditItemsSub[i] ? 'close' : 'pencil'}} mdi-18px"></i>
                                                </a>
                                            </th>
                                        </tr>
                                    </thead>

                                    <tbody *ngIf="!isEditItemsSub[i]">
                                        <tr *ngFor="let subfield of field['section']; let j = index">
                                            <td *ngIf="subfield?.name">
                                                <i (click)="deleteSubFieldValue(subfield,i,j)" class="mdi mdi-close mdi-18px"></i>
                                                {{subfield.name}}
                                            </td>
                                        </tr>
                                    </tbody>

                                    <tbody *ngIf="isEditItemsSub[i]">
                                        <tr *ngFor="let subfield of field['section']; let j = index">
                                            <td>
                                                <div class="input-group">
                                                    <div class="input-group-prepend">
                                                        <div (click)="deleteSubFieldValue(subfield,i,j)" class="input-group-text">
                                                            <i class="mdi mdi-close mdi-18px"></i>
                                                        </div>
                                                    </div>
                                                    <div class="subsections">
                                                        <!-- add here -->
                                                        <input [(ngModel)]="subfield.name" class="form-control" type="text"
                                                            name="{{subfield.name}}"
                                                            placeholder="Add Sub Section {{j + 1}}.....">







<!-- ////////////////unit -->





                                                            <table class="table table-striped table-bordered col-lg-10 ">
                                                                <caption>
                                                                    <!-- <i>Add/remove textbox and chip dynamically in Angular 6</i> -->
                                                                </caption>
                                                                <thead>
                                                                    <tr>
                                                                        <th>Add Unit
                                                                            <a (click)="onEditCloseUnits(i,j)" class="text-info float-right">
                                                                                <i
                                                                                    class="mdi mdi-{{isEditUnits[j] ? 'close' : 'pencil'}} mdi-18px"></i>
                                                                            </a>
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                            
                                                                <tbody *ngIf="!isEditUnits[j]">
                                                                    <tr *ngFor="let u of subfield['subsection']; let k = index">
                                                                        <td *ngIf="u?.name">
                                                                            <i (click)="deleteUnitValue(u,i,j,k)" class="mdi mdi-close mdi-18px"></i>
                                                                            {{u.name}}
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                            
                                                                <tbody *ngIf="isEditUnits[j]">
                                                                    <tr *ngFor="let u of subfield['subsection']; let k = index">
                                                                        <td>
                                                                            <div class="input-group">
                                                                                <div class="input-group-prepend">
                                                                                    <div (click)="deleteUnitValue(u,i,j,k)" class="input-group-text">
                                                                                        <i class="mdi mdi-close mdi-18px"></i>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="subsections">
                                                                                    <!-- add here -->
                                                                                    <textarea  rows="8" cols="30" [(ngModel)]="u.name" class="form-control" type="text"
                                                                                        name="{{u.name}}"
                                                                                        placeholder="Add Unit {{k + 1}}....."></textarea>
                                                                                </div>
                                                                            </div>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td align="right">
                                                                            <button *ngIf="unitArray.length <= 6"
                                                                                class="btn btn-secondary btn-lg1" type="button"
                                                                                (click)="addUnits(i,j,k)" style="margin-right:10px">Add Units</button>
                                                                            <!-- <button (click)="publish()" class="btn btn-primary btn-lg1"
                                                                                type="button">Save Section</button> -->
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>


<!-- //////////////// end unit -->










                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td align="right">
                                                <button *ngIf="subfieldArray.length <= 6"
                                                    class="btn btn-secondary btn-lg1" type="button"
                                                    (click)="addSubFieldValue(i)" style="margin-right:10px">Add Sub
                                                    Sections</button>
                                                <!-- <button (click)="publishSubSection(i,j)" class="btn btn-primary btn-lg1"
                                                    type="button">Save Section</button> -->
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <!-- </div> -->

                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td align="right">
                        <button *ngIf="fieldArray.length <= 6" class="btn btn-secondary btn-lg1" type="button"
                            (click)="addFieldValue()" style="margin-right:10px">Add Sections</button>
                        <!-- <button (click)="publishSections()" class="btn btn-primary btn-lg1" type="button">Save
                            Section</button> -->
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>